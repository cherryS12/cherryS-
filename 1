#!/data/data/com.termux/files/usr/bin/bash

chmod 777 è§£åŒ…/quimhgyb
chmod 777 è§£åŒ…/quickbms
chmod 777 è§£åŒ…/æ‰“åŒ….bms
chmod 777 è§£åŒ…/è§£åŒ….bms
chmod 777 è§£åŒ…/dat.py
chmod 777 dbjbbms/quickbms
chmod 777 datjbdb/rc1
chmod 777 dbjbbms/æ‰“åŒ….bms
chmod 777 dbjbbms/è§£åŒ….bms


if [[ -d "/data/user/0/com.termux/files/home/ch/" ]]; then
echo ""
else
mkdir /data/user/0/com.termux/files/home/ch/
fi

if [[ -d "/data/user/0/com.termux/files/home/ch/" ]]; then
echo ""
else
mkdir /data/user/0/com.termux/files/home/ch/
fi
qemu-i386 è§£åŒ…/quickbms è§£åŒ…/è§£åŒ….bms /storage/emulated/0/Download/ch/å’Œå¹³æ¢…èŠ±/datè§£åŒ…
# Banner
clear
echo -e "${PURPLE}-----------------------------------${NOCOLOR}"
echo -e "${GREEN}ä»¥åçš„è·¯è¿˜é•¿:${NOCOLOR} ${RED}è¦é ä½ è‡ªå·±æ¥èµ°æ¥${NOCOLOR}"
echo -e "${PURPLE}-----------------------------------${NOCOLOR}"
sleep 0.5
echo -ne ' åŠ è½½å®Œæˆ \r'
sleep 0.5
function xg {
    echo "è¯·é€‰æ‹©æ“ä½œï¼š"
    echo "1. å¯åŠ¨å·¥å…·"
    echo "0. æ“ä½œå–æ¶ˆ"
    read choice
    if [ $choice -eq 0 ]; then
        echo -e "\033[33mæ“ä½œå–æ¶ˆ æ­£åœ¨è¿”å›\033[0m"
        sleep 3
        source pak
    elif [ $choice -eq 1 ]; then
        if ! python è¡£æœæªçš®é£è¡Œå™¨ä¹‹ç±»/è¡£æœæªçš®ä¹‹ç±».py; then
            echo "ç¨‹åºè¿è¡Œå¤±è´¥ï¼Œé”™è¯¯: $?"
            sleep 1
            source pak
        else
            echo "ç¨‹åºè¿è¡ŒæˆåŠŸ"
            sleep 1
            source pak
        fi
    else
        echo "æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚"
        sleep 1
        source pak
    fi
}

# MAIN MENU GG or NON-CHUNKS
function gg {
    PS3='è¾“å…¥ä½ çš„é€‰æ‹©: '
    options=("$(echo -e "${PURPLE}å—è§£åŒ…${NC}\n")" "$(echo -e "${LBLUE}éå—è§£åŒ…${NC}\n")" "$(echo -e "${YELLOW}ğ—•ğ—”ğ—–ğ—${NC}\n")")
    select opt in "${options[@]}"; do
        case $opt in
            "$(echo -e "${PURPLE}å—è§£åŒ…${NC}\n")")
                unpackchunks
                ;;
            "$(echo -e "${LBLUE}éå—è§£åŒ…${NC}\n")")
                unpacknonchunks
                ;;
            "$(echo -e "${YELLOW}ğ—•ğ—”ğ—–ğ—${NC}\n")")
                break
                ;;
            *) echo "invalid option $REPLY";;
        esac
    done
}

function unpackchunks {

echo "æ˜¯å¦éœ€è¦è§£åŒ…æ–‡ä»¶ï¼š"
    echo "0. æ“ä½œå–æ¶ˆ"
    select file in $(find *.pak); do
        if [[ $REPLY -eq 0 ]]; then
            echo -e "\033[33mæ“ä½œå–æ¶ˆ æ­£åœ¨è¿”å›\033[0m"
            sleep 1
            echo -e "\033[1;31mè¯·å›è½¦å‘¼å‡ºèœå•æ \033[0m"
           break
           
        elif [[ $REPLY -gt 0 && $REPLY -le ${#REPLY[@]} ]]; then
            
            if ! qemu-i386 è§£åŒ…/quickbms è§£åŒ…/è§£åŒ….bms $file ç¾åŒ–å€¼è¾“å‡º; then
                echo "è§£åŒ…å¤±è´¥ï¼Œé”™è¯¯: $?"
                sleep 1
                echo -e "\033[1;31mè¯·å›è½¦å‘¼å‡ºèœå•æ \033[0m"
          break
          
            else
                echo "è§£åŒ…æˆåŠŸ: $file"
                sleep 1
                echo -e "\033[33mæ­£åœ¨åŠ è½½datæœç´¢ç³»ç»Ÿ\033[0m" 
                sleep 1
               zz
            fi
            break
        else
            echo "æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚"
            sleep 1
            echo -e "\033[1;31mè¯·å›è½¦å‘¼å‡ºèœå•æ \033[0m"
          break
          
        fi
    done



}

function db {
    local file
    echo -e "${LIGHTPURPLE}è¯·é€‰æ‹©è¦æ‰“åŒ…çš„ PAK æ–‡ä»¶ï¼š${NOCOLOR}"
    echo "0. æ“ä½œå–æ¶ˆ"
    #è¿™é‡Œæ˜¯å®šä¹‰å‡½æ•° fileå‡½æ•° è®©ä»–ä»£è¡¨å­˜æ”¾pakçš„æ–‡ä»¶å¤¹ï¼Œä»¥åŠæœç´¢.pakåç¼€æ–‡ä»¶
    select file in $(find /sdcard/Download/ttdnä¸‰åˆä¸€è·¯å¾„/PAK -name "*.pak"); do
        if [[ $REPLY -eq 0 ]]; then
            echo -e "\033[33mæ“ä½œå–æ¶ˆ æ­£åœ¨è¿”å›\033[0m"
            sleep 1
            source datjbdb/rc1
        elif [[ $REPLY -gt 0 && $REPLY -le ${#REPLY[@]} ]]; then
            #è¿™é‡Œæ˜¯æ‰“åŒ…æŒ‡ä»¤ $file æ˜¯æŒ‡å¼•ç”¨ fileå‡½æ•°
            if ! qemu-i386 dbjbbms/quickbms -w -r -r dbjbbms/æ‰“åŒ….bms $file /sdcard/Download/ttdnä¸‰åˆä¸€è·¯å¾„/æ‰“åŒ…; then
                echo -e "${RED}æ‰“åŒ…å¤±è´¥ï¼Œé”™è¯¯: $? ${NOCOLOR}"
                sleep 1
                source datjbdb/rc1
            else
                echo -e "${LIGHTPURPLE}æ‰“åŒ…æˆåŠŸ: $file ${NOCOLOR}"
                sleep 1
                source datjbdb/rc1
            fi
            break
        else
            echo "æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚"
            sleep 1
            source datjbdb/rc1
        fi
    done
   
}
function kjzl {
chmod +x setup
chmod +x setup
chmod +x setup
bash setu
}

function 3 {
    echo "è¯·é€‰æ‹©æ“ä½œï¼š"
    echo "1. å¯åŠ¨å·¥å…·"
    echo "0. æ“ä½œå–æ¶ˆ"
    read choice
    if [ $choice -eq 0 ]; then
        echo -e "\033[33mæ“ä½œå–æ¶ˆ æ­£åœ¨è¿”å›\033[0m"
        sleep 3
        source pak
    elif [ $choice -eq 1 ]; then
        if ! python ä¸€é”®ä¼ªå®ä½“/å’Œå¹³ç¾åŒ–å·¥å…·æºç .py; then
            echo "ç¨‹åºè¿è¡Œå¤±è´¥ï¼Œé”™è¯¯: $?"
            sleep 1
            source pak
        else
            echo "ç¨‹åºè¿è¡ŒæˆåŠŸ"
            sleep 1
            source pak
        fi
    else
        echo "æ— æ•ˆé€‰æ‹©ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚"
        sleep 1
        source pak
    fi
}







PS3="è¯·é€‰æ‹©å·¥å…·ç±»å‹:"
options=("ã€è¡£æœæªçš®ã€‘" "ã€è§£åŒ…ã€‘" "ã€æ‰“åŒ…ã€‘" "ã€åˆ›å»ºå¿«å¥æŒ‡ä»¤ã€‘" "ã€ä¸€é”®ç¾åŒ–ã€‘" "é€€å‡º")


select opt in "${options[@]}"
do
 case $opt in
    
    "ã€è¡£æœæªçš®ã€‘")
      xg
    ;;
    "ã€è§£åŒ…ã€‘")
     gg
    ;;
    "ã€æ‰“åŒ…ã€‘")
     db
    ;;
    "ã€å¿«å¥ã€‘")
     kjzl
    ;;
    "ã€ä¸€é”®ç¾åŒ–ã€‘")
     3
    ;;
   "é€€å‡º")
    exit 1
    ;;
     *) echo "invalid option $REPLY";;
  esac
done